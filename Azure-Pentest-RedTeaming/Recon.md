# Discovery and Recon

## Discovery and Recon - Azure Tenant

### Overview
Performing discovery and reconnaissance on the Azure Tenant is crucial for understanding the target environment. This section outlines various techniques and tools for Azure Tenant discovery.

#### Check if Azure Tenant is in Use, Tenant Name, and Federation
- Use the following link to check if the Azure tenant is in use, retrieve the tenant name, and determine federation status.
- Make sure to replace the username and domain.
    ```bash
    https://login.microsoftonline.com/getuserrealm.srf?login=[USERNAME@DOMAIN]&xml=1
    ```

#### Get the Tenant ID
- Retrieve the Azure Tenant ID using the following link:
- make sure to replace the domain name
    ```bash
    https://login.microsoftonline.com/[DOMAIN]/.well-known/openid-configuration
    ```

#### Validate Email ID
- Use the AADInternals tool (https://github.com/Gerenios/AADInternals) for Recon.
  - Import the AADInternals module:
    ```powershell
    Import-Module C:\AzAD\Tools\AADInternals\AADInternals.psd1 -Verbose
    ```
  - Get tenant name, authentication, brand name (usually same as directory name), and domain name:
    ```powershell
    Get-AADIntLoginInformation -UserName root@demo.onmicrosoft.com
    ```

#### Get Tenant Information
- Use the AADInternals tool for comprehensive information retrieval:
    ```powershell
    # Get tenant ID
    Get-AADIntTenantID -Domain demo.onmicrosoft.com

    # Get tenant domains
    Get-AADIntTenantDomains -Domain demo.onmicrosoft.com
    Get-AADIntTenantDomains -Domain test.onmicrosoft.com
    Get-AADIntTenantDomains -Domain microsoft.com

    # Get all the information
    Invoke-AADIntReconAsOutsider -DomainName defcorphq.onmicrosoft.com
    ```

### Additional Notes
- Validation of Email IDs can be performed by sending requests to:
  ```bash
  https://login.microsoftonline.com/common/GetCredentialType

